(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{120:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a(0),c=a.n(n),o=a(59),r=a.n(o),i=(a(68),a(30)),m=a(2),h=a(21),l=a(22),u=a(13),d=a(24),j=a(23),b=a(60),g=a.n(b).a.create({baseURL:"/api/"}),x=(a(85),function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).state={selectedRoom:"main",roomList:[],name:"",redirect:null},s.change=s.change.bind(Object(u.a)(s)),s.changeName=s.changeName.bind(Object(u.a)(s)),s.redirect=s.redirect.bind(Object(u.a)(s)),s}return Object(l.a)(a,[{key:"genRandomName",value:function(){return"Guest"+Math.floor(9999*Math.random()+1)}},{key:"componentDidMount",value:function(){var e=this;g.get("/rooms").then((function(t){var a=t.data.map((function(e){return e.name}));e.setState({roomList:a})})),this.setState({name:this.genRandomName()})}},{key:"change",value:function(e){this.setState({selectedRoom:e.target.value})}},{key:"changeName",value:function(e){this.setState({name:e.target.value})}},{key:"redirect",value:function(){this.setState({redirect:"/room/".concat(this.state.selectedRoom)})}},{key:"render",value:function(){return this.state.redirect?Object(s.jsx)(m.a,{push:!0,to:{pathname:this.state.redirect,state:{guestName:this.state.name}}}):Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("h1",{className:"app-name-h1",children:"The Hidden Chat"}),Object(s.jsx)("label",{className:"label-text",htmlFor:"rooms",children:"Select Room:"}),Object(s.jsx)("br",{}),Object(s.jsx)("select",{className:"select-room",onChange:this.change,name:"rooms",id:"rooms",children:this.state.roomList.map((function(e,t){return Object(s.jsx)("option",{className:"room-option",value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},t)}))}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{onChange:this.changeName,placeholder:"Type your username",type:"text",className:"name-input"}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{onClick:this.redirect,className:"connect-btn",children:"Connect"})]})}}]),a}(n.Component)),p=a(33),O=(a(90),a(62)),f=Object(O.io)(":80"),v=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).msgContainerRef=c.a.createRef(),e.state={guestName:"cccc",usersConnected:1,text:"",messages:[{type:"other",msgText:"Welcome to the room.",sender:"HiddenBot"}]},e.changeText=e.changeText.bind(Object(u.a)(e)),e.sendMessage=e.sendMessage.bind(Object(u.a)(e)),e}return Object(l.a)(a,[{key:"genRandomName",value:function(){return"Guest"+Math.floor(9999*Math.random()+1)}},{key:"componentDidMount",value:function(){var e=this;this.setState({guestName:this.genRandomName()},(function(){f.emit("join",{roomname:e.props.match.params.roomname,user:e.state.guestName}),f.on("message",(function(t){e.msgContainerRef.current.scrollTop=e.msgContainerRef.current.scrollHeight;var a=e.state.messages;e.setState({messages:[].concat(Object(p.a)(a),[{type:"other",msgText:t.txt,sender:t.sender}])}),console.log("AAS")}))}))}},{key:"changeText",value:function(e){this.setState({text:e.target.value})}},{key:"sendMessage",value:function(){var e=this.state.messages;this.setState({messages:[].concat(Object(p.a)(e),[{type:"own",msgText:this.state.text,sender:this.state.guestname}])}),f.emit("message",{roomname:this.props.match.params.roomname,user:this.state.guestName,txt:this.state.text})}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"chat-container",children:[Object(s.jsx)("div",{className:"room-name-container",children:this.props.match.params.roomname}),Object(s.jsx)("div",{className:"messages-container",ref:this.msgContainerRef,children:this.state.messages.map((function(e,t){return console.log(e),"own"===e.type?Object(s.jsxs)("div",{className:"message-own",children:["You: ",e.msgText]},t):Object(s.jsxs)("div",{className:"message-other",children:[e.sender," : ",e.msgText]},t)}))}),Object(s.jsx)("div",{className:"sidebar-container"}),Object(s.jsxs)("div",{className:"type-container",children:[Object(s.jsx)("textarea",{onChange:this.changeText}),Object(s.jsx)("button",{onClick:this.sendMessage,className:"send-message-btn",children:"Send"})]})]})}}]),a}(n.Component);var N=function(){return Object(s.jsx)(i.a,{children:Object(s.jsxs)(m.d,{children:[Object(s.jsx)(m.b,{exact:!0,path:"/",children:Object(s.jsx)(x,{})}),Object(s.jsx)(m.b,{path:"/room/:roomname",component:v})]})})};r.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(N,{})}),document.getElementById("root"))},68:function(e,t,a){},85:function(e,t,a){},90:function(e,t,a){}},[[120,1,2]]]);
//# sourceMappingURL=main.25266ee2.chunk.js.map